

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>metatool.core module &mdash; MetaTool 1.0.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="MetaTool 1.0.0 documentation" href="index.html"/>
        <link rel="next" title="metatool.cli module" href="cli_module.html"/>
        <link rel="prev" title="Welcome to MetaTool’s documentation!" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> MetaTool
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">metatool.core module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-metatool.core">MetaTool API specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="#metatool-api-guide">MetaTool API Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli_module.html">metatool.cli module</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">MetaTool</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>metatool.core module</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/core_module.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="metatool-core-module">
<h1>metatool.core module<a class="headerlink" href="#metatool-core-module" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-metatool.core">
<span id="metatool-api-specification"></span><h2>MetaTool API specification<a class="headerlink" href="#module-metatool.core" title="Permalink to this headline">¶</a></h2>
<p>This module represents MetaTool API - set of functions purposed for
interaction with MetaCore cloud servers. Each function provides specific
type of operation with the MetaCore server. Look through the functions for
detailed specification.</p>
<dl class="function">
<dt id="metatool.core.audit">
<code class="descclassname">metatool.core.</code><code class="descname">audit</code><span class="sig-paren">(</span><em>url_base</em>, <em>sender_key</em>, <em>btctx_api</em>, <em>file_hash</em>, <em>seed</em><span class="sig-paren">)</span><a class="headerlink" href="#metatool.core.audit" title="Permalink to this definition">¶</a></dt>
<dd><p>It make an request to the server with a view of calculating
the SHA-256 hash of a file plus some seed.
Return the response object with information about the server-error
when such has occurred.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>url_base</strong> (<em>string</em>) &#8211; URL string which defines the server will be used</li>
<li><strong>sender_key</strong> (<em>string</em>) &#8211; unique secret key which will be used for the
generating credentials required by the access to the server</li>
<li><strong>btctx_api</strong> (<em>btctxstore.BtcTxStore object</em>) &#8211; instance of the <code class="docutils literal"><span class="pre">BtcTxStore</span></code> class which will be used
to generate credentials for the server access</li>
<li><strong>file_hash</strong> (<em>string</em>) &#8211; hash-name of the file you are going to audit</li>
<li><strong>seed</strong> (<em>string</em>) &#8211; (str) should be a SHA-256 hash of that you would like to add
to the file data to generate a challenge response</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">response instance with the results of challenge or with
information about the server issue</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">requests.models.Response object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="metatool.core.download">
<code class="descclassname">metatool.core.</code><code class="descname">download</code><span class="sig-paren">(</span><em>url_base</em>, <em>sender_key</em>, <em>btctx_api</em>, <em>file_hash</em>, <em>rename_file=None</em>, <em>decryption_key=None</em>, <em>link=False</em><span class="sig-paren">)</span><a class="headerlink" href="#metatool.core.download" title="Permalink to this definition">¶</a></dt>
<dd><p>It performs the downloading of the file from the server
by the given <code class="docutils literal"><span class="pre">file_hash</span></code>.
If <code class="docutils literal"><span class="pre">link=True</span></code> will return GET-request URL-string instead of download,
so you can use it like a simple URL address and download it through the
browser.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note:</th><td class="field-body">The &#8220;link=True&#8221; case implies non-authenticated access to the
file, available only for files with such values of <code class="docutils literal"><span class="pre">roles</span></code>: 101, 001</td>
</tr>
</tbody>
</table>
<p>Will return the response object with information about the server-error
when such has occurred.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>url_base</strong> (<em>string</em>) &#8211; URL-string which defines the server will be used</li>
<li><strong>sender_key</strong> (<em>string</em>) &#8211; unique secret key which will be used for the
generating credentials required by the access to the server</li>
<li><strong>btctx_api</strong> (<em>btctxstore.BtcTxStore object</em>) &#8211; instance of the <code class="docutils literal"><span class="pre">BtcTxStore</span></code> class which will be used
to generate credentials for the server access</li>
<li><strong>file_hash</strong> (<em>string</em>) &#8211; hash-name of the file you are going to audit</li>
<li><strong>rename_file</strong> (<em>string</em>) &#8211; <p>defines new name of the file after downloading</p>
<p>(optional, default: None)</p>
</li>
<li><strong>decryption_key</strong> (<em>string</em>) &#8211; <p>key value which will be used to decrypt file
on the server before the downloading (if allowed by the role)</p>
<p>(optional, default: None)</p>
</li>
<li><strong>link</strong> (<em>boolean</em>) &#8211; <p>if <code class="docutils literal"><span class="pre">True</span></code>, function doesn&#8217;t perform the downloading but
generate appropriate GET URL-string instead</p>
<p>(optional, default: False)</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>full path to the file if download done successfully</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rtype:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>if <code class="docutils literal"><span class="pre">link=True</span></code>, will return GET-request
URL-string, instead of processing the downloading</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rtype:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>object with information about the occurred error on the server
while the downloading</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rtype:</th><td class="field-body">requests.models.Response object</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="metatool.core.files">
<code class="descclassname">metatool.core.</code><code class="descname">files</code><span class="sig-paren">(</span><em>url_base</em><span class="sig-paren">)</span><a class="headerlink" href="#metatool.core.files" title="Permalink to this definition">¶</a></dt>
<dd><p>It executes a request to the &#8220;Node&#8221; server and returns response object
with json-string - the list of hashes of downloaded files.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>url_base</strong> (<em>string</em>) &#8211; URL-string which defines the server will be used</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">response instance with a list of string - hashes of files
available on the server or with information about the server issue</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">requests.models.Response object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="metatool.core.info">
<code class="descclassname">metatool.core.</code><code class="descname">info</code><span class="sig-paren">(</span><em>url_base</em><span class="sig-paren">)</span><a class="headerlink" href="#metatool.core.info" title="Permalink to this definition">¶</a></dt>
<dd><p>It executes a request to the &#8220;Node&#8221; server and returns response object
with json-string - the information about server application state.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>url_base</strong> (<em>string</em>) &#8211; URL-string which defines the server will be used</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">response instance with node state information or with
information about the server issue</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">requests.models.Response object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="metatool.core.upload">
<code class="descclassname">metatool.core.</code><code class="descname">upload</code><span class="sig-paren">(</span><em>url_base</em>, <em>sender_key</em>, <em>btctx_api</em>, <em>file</em>, <em>file_role</em><span class="sig-paren">)</span><a class="headerlink" href="#metatool.core.upload" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload local file to the server. Max size of file is determined by the
server. In the most of cases it is restricted by the 128 MB.
Return the response object with <code class="docutils literal"><span class="pre">file_hash</span></code> and <code class="docutils literal"><span class="pre">file_role</span></code> when
have done successfully or the server-error when such has occurred.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>url_base</strong> (<em>string</em>) &#8211; URL-string which defines the server will be used</li>
<li><strong>sender_key</strong> (<em>string</em>) &#8211; unique secret key which will be used for the
generating credentials required by the access to the server</li>
<li><strong>btctx_api</strong> (<em>btctxstore.BtcTxStore object</em>) &#8211; instance of the <code class="docutils literal"><span class="pre">BtcTxStore</span></code> class which will be used
to generate credentials for the server access</li>
<li><strong>file</strong> (<em>file object opened in the 'rb' mode</em>) &#8211; file object which will be uploaded to the server</li>
<li><strong>file_role</strong> (<em>string</em>) &#8211; three numbers string which define future behavior of the
file on the server. See more about it in the documentation</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">response instance with the results of uploading or with
information about the server issue</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">requests.models.Response object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="metatool-api-guide">
<h2>MetaTool API Guide<a class="headerlink" href="#metatool-api-guide" title="Permalink to this headline">¶</a></h2>
<p>This part of the documentation gives thorough knowledge of the MetaTool API usage.</p>
<div class="section" id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>All API functions are placed in the <code class="docutils literal"><span class="pre">metatool.core</span></code> module which is described on the <strong>MetaTool API specification</strong>,
so here we&#8217;ll look on their use.</p>
<p>To start using the MetaTool API you should get the source code from the <a class="reference external" href="https://github.com/Storj/metatool.git">https://github.com/Storj/metatool.git</a> and
either install the package with the <code class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code> command or make sure that the directory nested the <code class="docutils literal"><span class="pre">metatool</span></code> package
is present at your <code class="docutils literal"><span class="pre">sys.path</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note:</th><td class="field-body">The <code class="docutils literal"><span class="pre">metatool</span></code> python package is not the same as root repository directory. The <code class="docutils literal"><span class="pre">metatool</span></code> package is the
<strong>metatool</strong> subdirectory of this repository.</td>
</tr>
</tbody>
</table>
<p>Let&#8217;s try to use it just installed required packages - clone the repo, open it, check the requirements and try to import package:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git clone https://github.com/Storj/metatool.git
Cloning into &#39;metatool&#39;...
remote: Counting objects: 504, done.
remote: Total 504 (delta 0), reused 0 (delta 0), pack-reused 504
Receiving objects: 100% (504/504), 950.65 KiB | 770.00 KiB/s, done.
Resolving deltas: 100% (279/279), done.
Checking connectivity... done.
$
$ cd metatool
$ pip install -r metatool/requirements.txt
Ignoring mock: markers &quot;python_version == &#39;2.7&#39;&quot; don&#39;t match your environment
Collecting btctxstore (from -r metatool/requirements.txt (line 2))
Collecting requests (from -r metatool/requirements.txt (line 3))
  Using cached requests-2.9.1-py2.py3-none-any.whl
Collecting future&gt;=0.15.2 (from btctxstore-&gt;-r metatool/requirements.txt (line 2))
Collecting pycoin&gt;=0.52 (from btctxstore-&gt;-r metatool/requirements.txt (line 2))
Collecting six&gt;=1.10.0 (from btctxstore-&gt;-r metatool/requirements.txt (line 2))
  Using cached six-1.10.0-py2.py3-none-any.whl
Collecting ecdsa&gt;=0.13 (from btctxstore-&gt;-r metatool/requirements.txt (line 2))
  Using cached ecdsa-0.13-py2.py3-none-any.whl
Installing collected packages: future, pycoin, six, ecdsa, btctxstore, requests
Successfully installed btctxstore-4.6.1 ecdsa-0.13 future-0.15.2 pycoin-0.62 requests-2.9.1 six-1.10.0
$
$ python
Python 3.4.3 (default, Oct 14 2015, 20:28:29)
[GCC 4.8.4] on linux
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; import metatool
&gt;&gt;&gt; metatool.core.files(&#39;http://node3.metadisk.org&#39;).text
&#39;[&quot;1d5ae562cc38e3adcf01a062207c2894fb8d055cfcf8200c3854c77eb6965645&quot;,
&quot;e3ae2933e83015368e3eb72d6de99442bde5195ae317dc9591ad9feaabdaebc8&quot;]&#39;
&gt;&gt;&gt;
</pre></div>
</div>
<p>This is the simplest use o MetaTool API. We&#8217;ve imported package from the current working directory,
called the core <code class="docutils literal"><span class="pre">files</span></code> function with desired URL and look at the <code class="docutils literal"><span class="pre">text</span></code> attribute of the returned Response object.
Ass result we see some json string with hash-names of the files uploaded to the server.</p>
<hr class="docutils" />
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cli_module.html" class="btn btn-neutral float-right" title="metatool.cli module" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to MetaTool’s documentation!" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Eugene Viktorov.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>
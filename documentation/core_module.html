

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>metatool.core module &mdash; MetaTool 1.0.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="MetaTool 1.0.0 documentation" href="index.html"/>
        <link rel="next" title="metatool.cli module" href="cli_module.html"/>
        <link rel="prev" title="metatool CLI reference" href="package_reference.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> MetaTool
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="package_reference.html">metatool CLI reference</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">metatool.core module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-metatool.core">MetaTool API specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="#metatool-api-guide">MetaTool API Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#review-of-common-arguments">Review of common arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#status-info">Status Info</a></li>
<li class="toctree-l3"><a class="reference internal" href="#file-info">File Info</a></li>
<li class="toctree-l3"><a class="reference internal" href="#post-data">POST Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#download-data">Download Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#file-audit">File Audit</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli_module.html">metatool.cli module</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">MetaTool</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>metatool.core module</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/core_module.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="metatool-core-module">
<h1>metatool.core module<a class="headerlink" href="#metatool-core-module" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-metatool.core">
<span id="metatool-api-specification"></span><h2>MetaTool API specification<a class="headerlink" href="#module-metatool.core" title="Permalink to this headline">¶</a></h2>
<p>This module represents MetaTool API - set of functions purposed for
interaction with MetaCore cloud servers. Each function provides specific
type of operation with the MetaCore server. Look through the functions for
detailed specification.</p>
<dl class="function">
<dt id="metatool.core.audit">
<code class="descclassname">metatool.core.</code><code class="descname">audit</code><span class="sig-paren">(</span><em>url_base</em>, <em>sender_key</em>, <em>btctx_api</em>, <em>file_hash</em>, <em>seed</em><span class="sig-paren">)</span><a class="headerlink" href="#metatool.core.audit" title="Permalink to this definition">¶</a></dt>
<dd><p>It make an request to the server with a view of calculating
the SHA-256 hash of a file plus some seed.
Return the response object with information about the server-error
when such has occurred.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>url_base</strong> (<em>string</em>) &#8211; URL string which defines the server will be used</li>
<li><strong>sender_key</strong> (<em>string</em>) &#8211; unique secret key which will be used for the
generating credentials required by the access to the server</li>
<li><strong>btctx_api</strong> (<em>btctxstore.BtcTxStore object</em>) &#8211; instance of the <code class="docutils literal"><span class="pre">BtcTxStore</span></code> class which will be used
to generate credentials for the server access</li>
<li><strong>file_hash</strong> (<em>string</em>) &#8211; hash-name of the file you are going to audit</li>
<li><strong>seed</strong> (<em>string</em>) &#8211; (str) should be a SHA-256 hash of that you would like to add
to the file data to generate a challenge response</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">response instance with the results of challenge or with
information about the server issue</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">requests.models.Response object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="metatool.core.download">
<code class="descclassname">metatool.core.</code><code class="descname">download</code><span class="sig-paren">(</span><em>url_base</em>, <em>file_hash</em>, <em>sender_key=None</em>, <em>btctx_api=None</em>, <em>rename_file=None</em>, <em>decryption_key=None</em>, <em>link=False</em><span class="sig-paren">)</span><a class="headerlink" href="#metatool.core.download" title="Permalink to this definition">¶</a></dt>
<dd><p>It performs the downloading of the file from the server
by the given <code class="docutils literal"><span class="pre">file_hash</span></code>.
If <code class="docutils literal"><span class="pre">link=True</span></code> will return GET-request URL-string instead of download,
so you can use it like a simple URL address and download it through the
browser.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note:</th><td class="field-body">The &#8220;link=True&#8221; case implies non-authenticated access to the
file, available only for files with such values of <code class="docutils literal"><span class="pre">roles</span></code>: 101, 001</td>
</tr>
</tbody>
</table>
<p>Will return the response object with information about the server-error
when such has occurred.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>url_base</strong> (<em>string</em>) &#8211; URL-string which defines the server will be used</li>
<li><strong>sender_key</strong> (<em>string</em>) &#8211; <p>unique secret key which will be used for the
generating credentials required by the access to the server</p>
<p>(optional, default: None)</p>
</li>
<li><strong>btctx_api</strong> (<em>btctxstore.BtcTxStore object</em>) &#8211; <p>instance of the <code class="docutils literal"><span class="pre">BtcTxStore</span></code> class which will be used
to generate credentials for the server access</p>
<p>(optional, default: None)</p>
</li>
<li><strong>file_hash</strong> (<em>string</em>) &#8211; hash-name of the file you are going to audit</li>
<li><strong>rename_file</strong> (<em>string</em>) &#8211; <p>defines new name of the file after downloading</p>
<p>(optional, default: None)</p>
</li>
<li><strong>decryption_key</strong> (<em>string</em>) &#8211; <p>key value which will be used to decrypt file
on the server before the downloading (if allowed by the role)</p>
<p>(optional, default: None)</p>
</li>
<li><strong>link</strong> (<em>boolean</em>) &#8211; <p>if <code class="docutils literal"><span class="pre">True</span></code>, function doesn&#8217;t perform the downloading but
generate appropriate GET URL-string instead</p>
<p>(optional, default: False)</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>full path to the file if download done successfully</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rtype:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>if <code class="docutils literal"><span class="pre">link=True</span></code>, will return GET-request
URL-string, instead of processing the downloading</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rtype:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>object with information about the occurred error on the server
while the downloading</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rtype:</th><td class="field-body">requests.models.Response object</td>
</tr>
</tbody>
</table>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="metatool.core.files">
<code class="descclassname">metatool.core.</code><code class="descname">files</code><span class="sig-paren">(</span><em>url_base</em><span class="sig-paren">)</span><a class="headerlink" href="#metatool.core.files" title="Permalink to this definition">¶</a></dt>
<dd><p>It executes a request to the &#8220;Node&#8221; server and returns response object
with json-string - the list of hashes of downloaded files.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>url_base</strong> (<em>string</em>) &#8211; URL-string which defines the server will be used</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">response instance with a list of string - hashes of files
available on the server or with information about the server issue</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">requests.models.Response object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="metatool.core.info">
<code class="descclassname">metatool.core.</code><code class="descname">info</code><span class="sig-paren">(</span><em>url_base</em><span class="sig-paren">)</span><a class="headerlink" href="#metatool.core.info" title="Permalink to this definition">¶</a></dt>
<dd><p>It executes a request to the &#8220;Node&#8221; server and returns response object
with json-string - the information about server application state.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>url_base</strong> (<em>string</em>) &#8211; URL-string which defines the server will be used</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">response instance with node state information or with
information about the server issue</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">requests.models.Response object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="metatool.core.upload">
<code class="descclassname">metatool.core.</code><code class="descname">upload</code><span class="sig-paren">(</span><em>url_base</em>, <em>sender_key</em>, <em>btctx_api</em>, <em>file</em>, <em>file_role</em><span class="sig-paren">)</span><a class="headerlink" href="#metatool.core.upload" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload local file to the server. Max size of file is determined by the
server. In the most of cases it is restricted by the 128 MB.
Return the response object with <code class="docutils literal"><span class="pre">file_hash</span></code> and <code class="docutils literal"><span class="pre">file_role</span></code> when
have done successfully or the server-error when such has occurred.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>url_base</strong> (<em>string</em>) &#8211; URL-string which defines the server will be used</li>
<li><strong>sender_key</strong> (<em>string</em>) &#8211; unique secret key which will be used for the
generating credentials required by the access to the server</li>
<li><strong>btctx_api</strong> (<em>btctxstore.BtcTxStore object</em>) &#8211; instance of the <code class="docutils literal"><span class="pre">BtcTxStore</span></code> class which will be used
to generate credentials for the server access</li>
<li><strong>file</strong> (<em>file object opened in the 'rb' mode</em>) &#8211; file object which will be uploaded to the server</li>
<li><strong>file_role</strong> (<em>string</em>) &#8211; string of three numbers which define future
behavior of the file on the server (look more it in the documentation)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">response instance with the results of uploading or with
information about the server issue</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">requests.models.Response object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="metatool-api-guide">
<h2>MetaTool API Guide<a class="headerlink" href="#metatool-api-guide" title="Permalink to this headline">¶</a></h2>
<p>This part of the documentation gives thorough knowledge of the MetaTool API usage.</p>
<div class="section" id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>All API functions are placed in the <code class="docutils literal"><span class="pre">metatool.core</span></code> module which is described on the <a class="reference internal" href="#metatool-api-specification">MetaTool API specification</a>,
so here we&#8217;ll look on their use.</p>
<p>To start using the MetaTool API you should get the source code from the <a class="reference external" href="https://github.com/Storj/metatool.git">repository</a> and
either install the package with the <code class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code> command or make sure that the directory nested the <code class="docutils literal"><span class="pre">metatool</span></code> package
is present at your <code class="docutils literal"><span class="pre">sys.path</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note:</th><td class="field-body">The <code class="docutils literal"><span class="pre">metatool</span></code> python package is not the same as root repository directory. The <code class="docutils literal"><span class="pre">metatool</span></code> package is the
<strong>metatool</strong> subdirectory of this repository.</td>
</tr>
</tbody>
</table>
<p>Let&#8217;s try to use it just installed required packages - clone the repo, open it, check the requirements and try to import package:</p>
<div class="highlight-python"><div class="highlight"><pre>$ git clone https://github.com/Storj/metatool.git
Cloning into &#39;metatool&#39;...
remote: Counting objects: 504, done.
...
$ cd metatool
$ pip install -r metatool/requirements.txt
Ignoring mock: markers &quot;python_version == &#39;2.7&#39;&quot; don&#39;t match your environment
Collecting btctxstore (from -r metatool/requirements.txt (line 2))
Collecting requests (from -r metatool/requirements.txt (line 3))
...
$ python
Python 3.4.3 (default, Oct 14 2015, 20:28:29)
[GCC 4.8.4] on linux
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; import metatool
&gt;&gt;&gt; metatool.core.files(&#39;http://node3.metadisk.org&#39;).text
&#39;[&quot;1d5ae562cc38e3adcf01a062207c2894fb8d055cfcf8200c3854c77eb6965645&quot;,
&quot;e3ae2933e83015368e3eb72d6de99442bde5195ae317dc9591ad9feaabdaebc8&quot;]&#39;
&gt;&gt;&gt;
</pre></div>
</div>
<p>This is the simplest use o MetaTool API. We&#8217;ve imported package from the current working directory,
called the core <code class="docutils literal"><span class="pre">files</span></code> function with desired URL and look at the <code class="docutils literal"><span class="pre">text</span></code> attribute of the returned Response object.
Ass result we see some json string with hash-names of the files uploaded to the server.</p>
<p>Next we will look at all API function closely.</p>
</div>
<div class="section" id="review-of-common-arguments">
<span id="common-arguments"></span><h3>Review of common arguments<a class="headerlink" href="#review-of-common-arguments" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">url_base:</th><td class="field-body"><p class="first">Each API function require this argument to define the server to send a request.
This is the <code class="docutils literal"><span class="pre">string</span></code> value in format <code class="docutils literal"><span class="pre">'http://your.server.com'</span></code></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">btctx_api:</th><td class="field-body"><p class="first">This is an instance of the <code class="docutils literal"><span class="pre">BtcTxStore</span></code> class which will be used to generate credentials for the server access.</p>
<p><a class="reference external" href="https://pypi.python.org/pypi/btctxstore">btctxstore</a> is a site-package Library to read/write data to bitcoin transaction outputs.
The reason to pass this argument is that the core function prepares appropriate request&#8217;s data for actions which
can be done in the <em>test</em> and <em>real</em> mode. This mode is defined in passed <code class="docutils literal"><span class="pre">BtcTxStore</span></code> instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note:</th><td class="field-body">The <code class="docutils literal"><span class="pre">sender_key</span></code> argument can be gained from this instance with <code class="docutils literal"><span class="pre">create_key()</span></code> method.</td>
</tr>
</tbody>
</table>
<p>To get this instance in the <strong>test</strong> mode you can use next command:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="n">btctx_api</span> <span class="o">=</span> <span class="n">BtcTxStore</span><span class="p">(</span><span class="n">testnet</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">dryrun</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">sender_key:</th><td class="field-body"><p class="first">Unique private key that will be used for the generating credentials, required by the access to the server.</p>
<p>To get <strong>test</strong> <code class="docutils literal"><span class="pre">sender_key</span></code> you can use such a code:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">btctxstore</span> <span class="kn">import</span> <span class="n">BtcTxStore</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">btctx_api</span> <span class="o">=</span> <span class="n">BtcTxStore</span><span class="p">(</span><span class="n">testnet</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">dryrun</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sender_key</span> <span class="o">=</span> <span class="n">btctx_api</span><span class="o">.</span><span class="n">create_key</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sender_key</span>
<span class="go">&#39;cRVY2joZQcdSumgAmCNkKYfZQjGchsNdQK1hG1hviLjBGAr8Y2Fa&#39;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">file_hash:</th><td class="field-body"><p class="first">It&#8217;s a string value - hash of the file&#8217;s data.
This value is used like name of the file on the server.
It ensures that the data passed to the endpoint has not been modified in transit.
<code class="docutils literal"><span class="pre">file_hash</span></code> should be the SHA-256 hash of file_data.</p>
<p>To get a proper <code class="docutils literal"><span class="pre">file_hash</span></code> from the file you can do next:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hashlib</span> <span class="kn">import</span> <span class="n">sha256</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># file object should be opened in the binary mode.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;eggs.txt&#39;</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># check that the file object has the start stream position</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># if it is used somewhere else.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">file</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># get the proper data-hash</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_hash</span> <span class="o">=</span> <span class="n">sha256</span><span class="p">(</span><span class="nb">file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_hash</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;cRVY2joZQcdSumgAmCNkKYfZQjGchsNdQK1hG1hviLjBGAr8Y2Fa&#39;</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="status-info">
<h3>Status Info<a class="headerlink" href="#status-info" title="Permalink to this headline">¶</a></h3>
<p>To do a quick glance at the nodes data usage use the <code class="docutils literal"><span class="pre">metatoo.core.info()</span></code> API function.
Only required argument is a host to use - string value in the next form:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="s">&#39;http://your.host.org&#39;</span>
</pre></div>
</div>
<p>The return value is a <a class="reference external" href="http://docs.python-requests.org/en/latest/api/#requests.Response">response</a> with the JSON object containing a data usage and limits for the node.
The same result you can get if you visit the <strong>/api/nodes/me/</strong> path of the node server in browser,
i.e. - <a class="reference external" href="http://node2.metadisk.org/api/nodes/me/">http://node2.metadisk.org/api/nodes/me/</a>.</p>
<p>Here&#8217;s an example of usage the <code class="docutils literal"><span class="pre">metatool.core.info()</span></code> API function:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">metatool</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&#39;http://node2.metadisk.org/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">  &quot;bandwidth&quot;: {</span>
<span class="go">    &quot;current&quot;: {</span>
<span class="go">      &quot;incoming&quot;: 0,</span>
<span class="go">      &quot;outgoing&quot;: 0</span>
<span class="go">    },</span>
<span class="go">    &quot;limits&quot;: {</span>
<span class="go">      &quot;incoming&quot;: null,</span>
<span class="go">      &quot;outgoing&quot;: null</span>
<span class="go">    },</span>
<span class="go">    &quot;total&quot;: {</span>
<span class="go">      &quot;incoming&quot;: 0,</span>
<span class="go">      &quot;outgoing&quot;: 0</span>
<span class="go">    }</span>
<span class="go">  },</span>
<span class="go">  &quot;public_key&quot;: &quot;13LWbTkeuu4Pz7nFd6jCEEAwLfYZsDJSnK&quot;,</span>
<span class="go">  &quot;storage&quot;: {</span>
<span class="go">    &quot;capacity&quot;: 524288000,</span>
<span class="go">    &quot;max_file_size&quot;: 924391,</span>
<span class="go">    &quot;used&quot;: 992874</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
</div>
<div class="section" id="file-info">
<h3>File Info<a class="headerlink" href="#file-info" title="Permalink to this headline">¶</a></h3>
<p>You can get all files currently listed on the node by use the <code class="docutils literal"><span class="pre">metatool.core.files()</span></code> API function.
All are the same as in previous function - provide an URL and you get <a class="reference external" href="http://docs.python-requests.org/en/latest/api/#requests.Response">response</a> with the JSON object,
but this time it&#8217;s a list of hash-names of files available on the node. Use they for access to the files.
The same list will be represented if you visit <a class="reference external" href="http://your.host.org/api/files">http://your.host.org/api/files</a> URL.</p>
<p>In example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">metatool</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">files</span><span class="p">(</span><span class="s">&#39;http://node2.metadisk.org/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="go">[&#39;1d5ae562cc38e3adcf01a062207c2894fb8d055cfcf8200c3854c77eb6965645&#39;,</span>
<span class="go">&#39;103de8978a393c6479a092ce22cf04a6dd8876039c53b66df8384f361f60163c&#39;,</span>
<span class="go">&#39;6f9745658c158a8b61b340164c9b899f26afbc0d823f5e4d2d92872b53eda9b0&#39;,</span>
<span class="go">&#39;6da1054eef20b8949622f2acc5a89c3243ff3b3d7aa8c2bb8fa5c04d15113c00&#39;,</span>
<span class="go">&#39;1a8b26b9ce3983ff21d0d85c796ad75c1d2d6047ec3f082497eb1a33e8120f3e&#39;,</span>
<span class="go">&#39;51484ac97ae37f52655160d714eb2c6ac56909aa2d170cd7812e01c35544db23&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="post-data">
<h3>POST Data<a class="headerlink" href="#post-data" title="Permalink to this headline">¶</a></h3>
<p>You can upload data via POST to an node with <code class="docutils literal"><span class="pre">metatool.core.upload()</span></code> function.
It require <code class="docutils literal"><span class="pre">url_base</span></code>, <code class="docutils literal"><span class="pre">sender_key</span></code>, <code class="docutils literal"><span class="pre">btctx_api</span></code> arguments described at <a class="reference internal" href="#review-of-common-arguments">Review of common arguments</a>
and two original arguments:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">file:</th><td class="field-body"><p class="first">It&#8217;s a file object opened in the <code class="docutils literal"><span class="pre">'rb'</span></code> mode:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># file object should be opened in the binary mode!</span>
<span class="n">file_obj</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;eggs.txt&#39;</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note:</th><td class="field-body">File should not be larger than 128 MB.</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-even field"><th class="field-name">file_role:</th><td class="field-body"><p class="first">It&#8217;s a string of three numbers which define future behavior of the file on the server.
For example, <code class="docutils literal"><span class="pre">'001'</span></code> would be a free public file that can be downloaded in plaintext.
Look more at the <a class="reference internal" href="package_reference.html#file-roles"><span>file roles</span></a>.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note:</th><td class="field-body">Be sure to use strings - if you pass the role like integer <code class="docutils literal"><span class="pre">001</span></code>
instead of <code class="docutils literal"><span class="pre">'001'</span></code> passed value will be <code class="docutils literal"><span class="pre">1</span></code> and upload will fail.
It can confuse, because the integer value <code class="docutils literal"><span class="pre">101</span></code> will be processed fine.</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>It returns the <a class="reference external" href="http://docs.python-requests.org/en/latest/api/#requests.Response">response</a> object with such a JSON string:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
  <span class="s">&quot;data_hash&quot;</span><span class="p">:</span> <span class="s">&quot;72937d081099a3326b05228e30e7ee8a0a05efac68ec2e8d3c6bf1ee4e5bda69&quot;</span><span class="p">,</span>
  <span class="s">&quot;file_role&quot;</span><span class="p">:</span> <span class="s">&quot;101&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Let&#8217;s look at the example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">metatool</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">btctxstore</span> <span class="kn">import</span> <span class="n">BtcTxStore</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_obj</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;some_file.txt&#39;</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">btctx_api</span> <span class="o">=</span> <span class="n">BtcTxStore</span><span class="p">(</span><span class="n">testnet</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">dryrun</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sender_key</span> <span class="o">=</span> <span class="n">btctx_api</span><span class="o">.</span><span class="n">create_key</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">metatool</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">url_base</span><span class="o">=</span><span class="s">&#39;http://localhost:5000&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">sender_key</span><span class="o">=</span><span class="n">sender_key</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">btctx_api</span><span class="o">=</span><span class="n">btctx_api</span><span class="p">,</span>
<span class="gp">... </span>    <span class="nb">file</span><span class="o">=</span><span class="n">file_obj</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">file_role</span><span class="o">=</span><span class="s">&#39;101&#39;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="go">{&#39;file_role&#39;: &#39;101&#39;, &#39;data_hash&#39;: &#39;76a97c878c9c7a8321bb395c2b44d3fe2f8d81314d219b20138ed0e2dddd5182&#39;}</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note:</th><td class="field-body">reload of any file don&#8217;t bring any effect - you will get the same response object,
like you&#8217;re doing it in the very first time, but transmission wouldn&#8217;t be performed, and
the old <code class="docutils literal"><span class="pre">file_role</span></code> <strong>value will be retained</strong>!!!</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="download-data">
<h3>Download Data<a class="headerlink" href="#download-data" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">metatool.core.download()</span></code> is the API MetaTool function, which downloads
data from the node server. Type of returned data is depends on download status -
if file is downloaded successfully returned data will be a <strong>full path</strong> to the saved file,
otherwise it will be a <a class="reference external" href="http://docs.python-requests.org/en/latest/api/#requests.Response">response</a> object with a response status code.</p>
<p>Also, if the <code class="docutils literal"><span class="pre">link</span></code> optional argument will be provided like <code class="docutils literal"><span class="pre">True</span></code>, instead of downloading
appropriate GET URL-request string will be returned to perform the downloading manually,
but available only for non-authenticated access, defined for each file by the <code class="docutils literal"><span class="pre">file_role</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">metatool</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">download</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">url_base</span><span class="o">=</span><span class="s">&#39;http://node2.metadisk.org&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">file_hash</span><span class="o">=</span><span class="s">&#39;1a8b26b9ce3983ff21d0d85c796ad75c1d2d6047ec3f082497eb1a33e8120f3e&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">link</span><span class="o">=</span><span class="bp">True</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">&#39;http://node2.metadisk.org/api/files/1a8b26b9ce3983ff21d0d85c796ad75c1d2d6047ec3f082497eb1a33e8120f3e&#39;</span>
</pre></div>
</div>
<p>This mode of <code class="docutils literal"><span class="pre">download()</span></code> supports rendering of provided <code class="docutils literal"><span class="pre">rename_file</span></code> and <code class="docutils literal"><span class="pre">decryption_key</span></code> arguments:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">metatool</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">download</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">url_base</span><span class="o">=</span><span class="s">&#39;http://node2.metadisk.org&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">file_hash</span><span class="o">=</span><span class="s">&#39;1a8b26b9ce3983ff21d0d85c796ad75c1d2d6047ec3f082497eb1a33e8120f3e&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">rename_file</span><span class="o">=</span><span class="s">&#39;new_name.eggs&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">decryption_key</span><span class="o">=</span><span class="s">&#39;%A3%B4e</span><span class="si">%E</span><span class="s">A</span><span class="si">%82%</span><span class="s">00</span><span class="si">%22%</span><span class="s">3A%C3</span><span class="si">%86%</span><span class="s">C0hn1%B3</span><span class="si">%F</span><span class="s">7</span><span class="si">%F</span><span class="s">7</span><span class="si">%F</span><span class="s">8</span><span class="si">%8E</span><span class="s">L7S</span><span class="si">%F</span><span class="s">3D</span><span class="si">%28%</span><span class="s">7C</span><span class="si">%85%</span><span class="s">95%CE%9D%D5B&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">link</span><span class="o">=</span><span class="bp">True</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">&#39;http://node2.metadisk.org/api/files/1a8b26b9ce3983ff21d0d85c796ad75c1d2d6047ec3f082497eb1a33e8120f3e?decryption_key=%25A3%25B4e%25EA%2582%2500%2522%253A%25C3%2586%25C0hn1%25B3%25F7%25F7%25F8%258EL7S%25F3D%2528%257C%2585%2595%25CE%259D%25D5B&amp;file_alias=new_name.eggs&#39;</span>
</pre></div>
</div>
<p>This function have all of the <a class="reference internal" href="#common-arguments">common-arguments</a> and three additional arguments:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">rename_file:</th><td class="field-body"><p class="first">Optional argument which is a string value that defines a new name and place where to save the file:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">'new_name.txt'</span></code> - downloaded file will be saved in the current work directory under this name</li>
<li><code class="docutils literal"><span class="pre">'../love_me_tender.mp3'</span></code> - the file will be saved at the parend directory under given name</li>
<li><code class="docutils literal"><span class="pre">'/home/user/reptiles/eggs/spam.py'</span></code> - file will be saved by the path regardless to the current
directory, but recursively creating intermediate directories in given path.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note:</th><td class="field-body">this operation can be restricted by the access-permissions (<a class="reference external" href="https://en.wikipedia.org/wiki/Chmod">chmode</a>)</td>
</tr>
</tbody>
</table>
<p>By default file will be saved under the <code class="docutils literal"><span class="pre">file_hash</span></code> value as name in the current directory.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">decryption_key:</th><td class="field-body"><p class="first">This is the optional argument - string which is a key to decrypt data in the course of downloading.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note:</th><td class="field-body">it require appropriate <a class="reference internal" href="package_reference.html#file-roles"><span>file roles</span></a> value - available only for the <code class="docutils literal"><span class="pre">**1</span></code> role variants</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-even field"><th class="field-name">link:</th><td class="field-body"><p class="first">It defines behaviour of the function:
- <code class="docutils literal"><span class="pre">False</span></code> - the default value, when the function performs the downloading
- <code class="docutils literal"><span class="pre">True</span></code> - function will generate the GET-request string for the given arguments</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note:</th><td class="field-body"><code class="docutils literal"><span class="pre">True</span></code> value implies free access to the file - the <code class="docutils literal"><span class="pre">file_role</span></code> should be
one of <code class="docutils literal"><span class="pre">101</span></code>, <code class="docutils literal"><span class="pre">001</span></code>.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p class="last">Look for examples with <code class="docutils literal"><span class="pre">link</span></code> above.</p>
</td>
</tr>
</tbody>
</table>
<p>The most simple way of use is provide only required positional arguments, but as mentioned above - it&#8217;s available
only for the files with non-authenticated access (<code class="docutils literal"><span class="pre">'001',</span> <span class="pre">'101'</span></code> role values):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">metatool</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">metatool</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s">&#39;http://node2.metadisk.org&#39;</span><span class="p">,</span> <span class="s">&#39;1a8b26b9ce3983ff21d0d85c796ad75c1d2d6047ec3f082497eb1a33e8120f3e&#39;</span><span class="p">)</span>
<span class="go">&#39;/home/jeka/1a8b26b9ce3983ff21d0d85c796ad75c1d2d6047ec3f082497eb1a33e8120f3e&#39;</span>
</pre></div>
</div>
<p>To download files with other <code class="docutils literal"><span class="pre">file_role</span></code> you should pass <code class="docutils literal"><span class="pre">sender_key</span></code> and  <code class="docutils literal"><span class="pre">btctx_api</span></code> optional <a class="reference internal" href="#common-arguments">common-arguments</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">metatool</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">btctxstore</span> <span class="kn">import</span> <span class="n">BtcTxStore</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">btctx_api</span> <span class="o">=</span> <span class="n">BtcTxStore</span><span class="p">(</span><span class="n">testnet</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">dryrun</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sender_key</span> <span class="o">=</span> <span class="n">btctx_api</span><span class="o">.</span><span class="n">create_key</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">metatool</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">download</span><span class="p">(</span>
<span class="gp">... </span>   <span class="n">url_base</span><span class="o">=</span><span class="s">&#39;http://localhost:5000&#39;</span><span class="p">,</span>
<span class="gp">... </span>   <span class="n">file_hash</span><span class="o">=</span><span class="s">&quot;374522eb582f4773c9d92376c8aece5e7838375f69282d007ab5513034debf38&quot;</span><span class="p">,</span>
<span class="gp">... </span>   <span class="n">sender_key</span><span class="o">=</span><span class="n">sender_key</span><span class="p">,</span>
<span class="gp">... </span>   <span class="n">btctx_api</span><span class="o">=</span><span class="n">btctx_api</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">&#39;/home/user/374522eb582f4773c9d92376c8aece5e7838375f69282d007ab5513034debf38&#39;</span>
</pre></div>
</div>
<p>Because of arguments <code class="docutils literal"><span class="pre">sender_key</span></code> and <code class="docutils literal"><span class="pre">btctx_api</span></code> in this function are optional they can be omitted,
but you can&#8217;t provide only one of them, they should be given at the same time.</p>
<p>If you try to download file with invalid credentials function will return response object with occurred error status:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">metatool</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">download</span><span class="p">(</span>
<span class="gp">... </span>   <span class="n">url_base</span><span class="o">=</span><span class="s">&#39;http://localhost:5000&#39;</span><span class="p">,</span>
<span class="gp">... </span>   <span class="n">file_hash</span><span class="o">=</span><span class="s">&quot;374522eb582f4773c9d92376c8aece5e7838375f69282d007ab5513034debf38&quot;</span><span class="p">,</span>
<span class="gp">... </span>   <span class="n">sender_key</span><span class="o">=</span><span class="n">lame_sender_key</span><span class="p">,</span>
<span class="gp">... </span>   <span class="n">btctx_api</span><span class="o">=</span><span class="n">btctx_api</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">  &quot;error_code&quot;: 401</span>
<span class="go">}</span>
</pre></div>
</div>
</div>
<div class="section" id="file-audit">
<h3>File Audit<a class="headerlink" href="#file-audit" title="Permalink to this headline">¶</a></h3>
<p>This function calculates the SHA-256 hash of a file plus some seed.
The reason for this is to ensure the existence of files on the server.</p>
<p>It requires all of the <a class="reference internal" href="#common-arguments">common-arguments</a> and one original argument:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">seed:</th><td class="field-body">Challenge seed should be a SHA-256 hash of that you would like to add
to the file data to generate a challenge response.</td>
</tr>
</tbody>
</table>
<p>Here is an example of usage <code class="docutils literal"><span class="pre">metatool.core.audit()</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">metatool</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">audit</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">url_base</span><span class="o">=</span><span class="s">&#39;http://localhost:5000&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">file_hash</span><span class="o">=</span><span class="s">&quot;374522eb582f4773c9d92376c8aece5e7838375f69282d007ab5513034debf38&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">sender_key</span><span class="o">=</span><span class="n">sender_key</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">btctx_api</span><span class="o">=</span><span class="n">btctx_api</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">seed</span><span class="o">=</span><span class="s">&#39;19b25856e1c150ca834cffc8b59b23adbd0ec0389e58eb22b3b64768098d002b&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">  &quot;challenge_response&quot;: &quot;b766fa69c14d453433af277ea56a82253f7fd8fa17c286f028f154533ce60d56&quot;,</span>
<span class="go">  &quot;challenge_seed&quot;: &quot;19b25856e1c150ca834cffc8b59b23adbd0ec0389e58eb22b3b64768098d002b&quot;,</span>
<span class="go">  &quot;data_hash&quot;: &quot;374522eb582f4773c9d92376c8aece5e7838375f69282d007ab5513034debf38&quot;</span>
<span class="go">}</span>
</pre></div>
</div>
<hr class="docutils" />
<p>That&#8217;s it, for the detailed specification look at the <a class="reference internal" href="#metatool-api-specification">MetaTool API specification</a> .</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cli_module.html" class="btn btn-neutral float-right" title="metatool.cli module" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="package_reference.html" class="btn btn-neutral" title="metatool CLI reference" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Eugene Viktorov.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>